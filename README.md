# Система валидации видеорекламы

Автоматизированная система для проверки соответствия видеорекламных материалов техническим и юридическим требованиям.

## 🎯 Назначение

Система выполняет комплексный анализ видеофайлов:
- **Техническая валидация** - проверка параметров видео/аудио
- **Контент-анализ** - извлечение и анализ содержимого
- **Юридическая проверка** - AI-анализ соответствия требованиям

## 🏗️ Архитектура

### Модульная структура
```
┌─────────────────────────────────────────────────────────┐
│                    MAIN APPLICATION                     │
│  main.py - координация всех процессов                   │
└─────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────┐
│                CORE VALIDATION LAYER                    │
│  • VideoValidator - технические параметры               │
│  • AudioValidator - аудио параметры                     │
│  • ContainerValidator - формат контейнера               │
└─────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────┐
│               CONTENT ANALYSIS LAYER                    │
│  • AudioExtractor - извлечение аудио                    │
│  • FrameExtractor - извлечение кадров                   │
│  • SpeechTranscriber - распознавание речи               │
│  • OCRProcessor - распознавание текста                  │
│  • QRCodeDetector - детекция QR-кодов                   │
└─────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────┐
│                  AI ANALYSIS LAYER                      │
│  • OpenAI Client - юридический анализ                   │
│  • ReportGenerator - генерация отчетов                  │
└─────────────────────────────────────────────────────────┘
```

### Поток обработки
1. **Валидация** → Проверка технических параметров
2. **Извлечение** → Аудио, кадры, текст, QR-коды
3. **AI-анализ** → Юридическая проверка через GPT-4
4. **Отчетность** → Генерация файлов с результатами

## 🛠️ Технологический стек

### Основные компоненты
- **Python 3.x** - основной язык разработки
- **PyMediaInfo** - анализ метаданных медиафайлов
- **MoviePy** - обработка видео/аудио
- **OpenCV** - компьютерное зрение
- **Whisper** - распознавание речи
- **EasyOCR** - OCR распознавание
- **PyZBar** - детекция QR-кодов
- **OpenAI GPT-4.1** - AI-анализ

### Зависимости
```
openai          # AI API для юридического анализа
whisper         # Распознавание речи
moviepy         # Обработка видео/аудио
opencv-python   # Компьютерное зрение
easyocr         # OCR распознавание
pyzbar          # QR-код детекция
Pillow          # Обработка изображений
ffmpeg-python   # Медиа обработка
pymediainfo     # Метаданные медиа
python-docx     # Генерация отчетов
numpy           # Численные вычисления
```

## 📋 Технические требования

### Входные данные
- **Формат:** MXF (Material Exchange Format)
- **Видео:** Full HD (1920x1080), 25 fps, чересстрочная развертка
- **Аудио:** PCM, 2 канала, 48 кГц, 24 бит
- **Битрейт:** 50 Мбит/с

### Проверяемые параметры
- Контейнер (MXF)
- Видеокодек (MPEG Video)
- Разрешение (1920x1080)
- Частота кадров (25 fps)
- Соотношение сторон (16:9)
- Тип развертки (чересстрочная)
- Глубина цвета (8 бит)
- Цветовое пространство (YUV)
- Хроматическая субдискретизация (4:2:2)
- Битрейт (50 Мбит/с)
- Аудиоформат (PCM, 2 канала, 48 кГц, 24 бит)

## 📊 Выходные данные

### Генерируемые файлы
Все отчеты сохраняются в папку `report/`:

- `report/technical_validation_YYYYMMDD_HHMMSS.txt` - технический отчет
- `report/openai_analysis_YYYYMMDD_HHMMSS.txt` - AI-анализ
- `report/chatgpt_analysis_YYYYMMDD_HHMMSS.zip` - архив для ChatGPT
- `report/chatgpt_prompt_YYYYMMDD_HHMMSS.txt` - промпт для ChatGPT

### Структура отчетов
```
Technical Validation Report
├── Technical Requirements Reference
├── Validation Results
└── Summary (Passed/Failed/Total)

AI Analysis Report
├── Legal Compliance Check
├── Requirement-by-requirement Analysis
└── Overall Assessment
```

## 🚀 Масштабируемость

### Планы развития
- Улучшение точности OCR для русского языка
- Веб-интерфейс для загрузки файлов
- База данных для хранения результатов
- Backend

## 📈 Метрики качества

### Производительность
- Время обработки: < 5 минут для 10-секундного ролика
- Точность OCR: > 90% для русского текста
- Точность транскрипции: > 95% для русской речи
- Детекция QR-кодов: > 99% для стандартных QR-кодов

## 📝 Использование

### Установка
```bash
pip install -r requirements.txt
```

### Запуск
```bash
python main.py
```

### Конфигурация
- Поместите видеофайл в корневую папку
- Убедитесь, что файл имеет формат MXF
- Проверьте наличие всех зависимостей

### Результаты
После выполнения анализа все отчеты автоматически сохраняются в папку `report/`:
- Технические отчеты валидации
- AI-анализ правового соответствия  
- Архивы с данными для ChatGPT
- Готовые промпты для анализа в ChatGPT
